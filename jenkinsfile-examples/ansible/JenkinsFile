pipeline {
    agent none
    stages {
        stage('Staging'){
            agent { label 'docker' }
            steps {
                checkout scm
                script {
                    sh 'sudo apt-get update'
                    // sh 'sudo apt-get -y install python-m2crypto python-openssl'
                    sh 'which -a python'
                    sh 'python --version'
                    sh 'sudo /usr/local/bin/pip install -U pip setuptools'
                    sh 'sudo /usr/local/bin/pip install -Uv m2crypto'
                    sh 'sudo /usr/local/bin/pip install -r ./jenkinsfile-examples/ansible/ansible25.requirements'
                    // sh 'pip install ansible==2.5.2'
                    sh 'ansible --version'
                }
            }
        }
    }
}
